<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Battle of terrorist</title>
	<link rel = "stylesheet" href = "main.css"/>
	<!-- Se crea un script que indica donde esta processing.js !-->
	<script src="processing.js"></script>
</head>
<body>

	<!-- Se crea el script indicando de que tipo es processing.js !-->
	<script type="application/processing" data-processing-target="mycanvas">
		/* @pjs font="transformer.ttf" */
		//Se da la orden de precarga de la imagen que vamos a utilizar como background
		//se crea una variable del tipo PImage llamada bg
		PImage primerPersonaje, logo, segundoPersonaje, tercerPersonaje, cuartoPersonaje, MOD;

		PFont font_name;
		float xpos;
		float ypos;
		float drag = 1.1;
		RectButton buttonPersonaje1;
		boolean locked = false;


		//Funcion setup
		void setup() 
		{
			//Esta linea determinará el tamaño de nuestro canvas
			size(1000, 500);
			frameRate(60);
			xpos = width/2;
			ypos = height/2;

			primerPersonaje = loadImage("img/1FIN.png");
			segundoPersonaje = loadImage("img/2FIN.png");
			tercerPersonaje = loadImage("img/3FIN.png");
			cuartoPersonaje = loadImage("img/4FIN.png");
			MOD = loadImage("img/raton5.png");	
			logo = loadImage("img/logo1.png")
			font_name = createFont("transformer", 65);
			textFont(font_name);
			font_name = loadFont("transformer.ttf");
			textFont(font_name, 65);
			fill(204, 204, 0);
			//BOTON 1
			buttoncolor = color(204);
			highlight = color(153); 
			buttonPersonaje1 = new RectButton(130, 110, 24, buttoncolor, highlight);


		}

		void draw() 
		{			 

			//background(0, 10, RGB);
			background(0);
			text("Elige un personsaje", 200, 250);
			image(logo, 400, 25, 200, 100, 7);
			//rectMode(CENTER);
            //rect(100,325,800,125);
            image(primerPersonaje, 100, 270,50,70);
            image(segundoPersonaje, 350, 270, 50, 70);
            image(tercerPersonaje, 600, 270, 50, 70);
            image(cuartoPersonaje, 850, 270, 50, 70);
            float difx = mouseX - xpos-MOD.width/2;
            if(abs(difx) > 1.0) {
            	xpos = xpos + difx/drag;
            	xpos = constrain(xpos, 0, width-MOD.width);
            }  

            float dify = mouseY - ypos-MOD.height/2;
            if(abs(dify) > 1.0) {
            	ypos = ypos + dify/drag;
            	ypos = constrain(ypos, 0, height-MOD.height);
            }  

  			// Display the sprite at the position xpos, ypos
  			image(MOD, xpos, ypos);

  			if(mousePressed == true) {
  				noCursor();
  			} else {

  				noCursor();
  			}
  			
  			//BOTON 1
  			buttonPersonaje1.display();


  		}

  		//Actualiza el BOTON
  		void update(int x, int y)

  		{

  			if(locked == false) {
  				buttonPersonaje1.update();
  			} 
  			else {
  				locked = false;
  			}
  			if(mousePressed) {
  				if(buttonPersonaje1.pressed()) {
  					currentcolor = buttonPersonaje1.basecolor;
  				} 
  			}
  		}

  		//Clase BOTON

  		class Button

  		{
  			int x, y;
  			int size;
  			color basecolor, highlightcolor;
  			color currentcolor;
  			boolean over = false;
  			boolean pressed = false;   


  			void update() 

  			{
  				if(over()) {
  					currentcolor = highlightcolor;
  				} 
  				else {
  					currentcolor = basecolor;
  				}
  			}

  			boolean pressed() 
  			{
  				if(over) {
  					locked = true;
  					return true;
  				} 
  				else {
  					locked = false;
  					return false;
  				}    
  			}



  			boolean over() 
  			{ 
  				return true; 
  			}

  			boolean overRect(int x, int y, int width, int height) 
  			{
  				if (mouseX >= x && mouseX <= x+width && 
  					mouseY >= y && mouseY <= y+height) {
  					return true;
  			} 
  			else {
  				return false;
  			}
  		}
}

  		class RectButton extends Button

  		{

  			RectButton(int ix, int iy, int isize, color icolor, color ihighlight) 
  			{
  				x = ix;
  				y = iy;
  				size = isize;
  				basecolor = icolor;
  				highlightcolor = ihighlight;
  				currentcolor = basecolor;
  			}

  			boolean over() 
  			{
  				if( overRect(x, y, size, size) ) {
  					over = true;
  					return true;
  				} 
  				else {
  					over = false;
  					return false;
  				}
  			}

  			void display() 
  			{
  				stroke(255);
  				fill(currentcolor);
  				rect(x, y, size, size);
  			}
  		}















  	</script>

  	<canvas width="1000" height="500" id="mycanvas">

  	</canvas>

  </body>
  </html>