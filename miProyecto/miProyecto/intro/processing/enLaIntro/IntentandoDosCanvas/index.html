<!DOCTYPE html>
<html lang = "es">
<head><link rel = "stylesheet" href = "style/main.css"/>
  <link rel = "stylesheet" href = "style/hover.css" media="all"/>
  <link rel = "icon" type = "image/png" href = "images/web/iconGun.png" />
  <script src="processing.js"></script>
  <script type="text/javascript" src="javascript/SaveImages.js"></script>
  <script type="text/javascript" src="javascript/Sprites.js"></script>
  <script type="text/javascript" src="javascript/Tile.js"></script>
  <script type="text/javascript" src="javascript/Character.js"></script>
  <script type="text/javascript" src="javascript/Collision.js"></script>
  <script type="text/javascript" src="javascript/Player.js"></script>
  <script type="text/javascript" src="javascript/Bullet.js"></script>
  <script type="text/javascript" src="javascript/World.js"></script>
  <meta charset = "UTF-8">
  <title> Official Site | Battle of terrorist </title>
  <script src="processing.js"></script>
  <style>
  @font-face{
    font-family: "transformer";
    src: url("transformer.ttf");
  } 
  </style>
</head>
<body> <!-- To load canvas --> 
  <canvas id="layer1"
  style="z-index: 2;
  position:absolute;
  left:0px;
  top:0px;
  " height="1250" width="600">
  This text is displayed if your browser does not support HTML5 Canvas.
</canvas>
<canvas id="canvas"
style="z-index: 1;
position:absolute;
left:0px;
top:0px;
" height="1250" width="600">
This text is displayed if your browser does not support HTML5 Canvas.
</canvas>
<script>
function init() {
  
	

  
  drawAll();
		//setInterval(drawAll, 20);
	}
  function drawAll() {
    draw1();
    draw2();
  }


  function draw1(){


    function sketchProc(processing) {

     var xpos;
     var ypos;
     var drag = 1;
     var can = false;
     var rectX1, rectY1, rectX2, rectY2, rectX3, rectY3, rectX4, rectY4, rectJUGARX, rectJUGARY;
     var rectOver = false, rectOver1 = false, rectOver2 = false, rectOver3 = false, rectOver4 = false, texto = false;
     var transformer;


      //SETUP Processing
      processing.size(1250, 650);
      processing.frameRate(60);
      transformer = processing.createFont("transformer"); 

      xpos = processing.width/1.5;
      ypos = processing.height/1.5;

      primerPersonaje = processing.loadImage("img/1FIN.png");
      segundoPersonaje = processing.loadImage("img/2FIN.png");
      tercerPersonaje = processing.loadImage("img/3FIN.png");
      cuartoPersonaje = processing.loadImage("img/4FIN.png");
      MOD = processing.loadImage("img/ratonMOD.png");  
      logo = processing.loadImage("img/logo1.png")
      processing.textFont(transformer, 65);

      rectX1 = 130;
      rectY1 = 430;
      rectX2 = 410;
      rectY2 = 430;
      rectX3 = 690;
      rectY3 = 430;
      rectX4 = 970;
      rectY4 = 430;
      rectJUGARX = 325; 
      rectJUGARY = 550; 


  //DRAW
  processing.draw = function() { 
  	processing.background(0);
  	processing.noCursor();
  	processing.text("Elige un personaje", 310, 310);

  	processing.image(MOD, xpos, ypos);
  	processing.image(logo, 475, 25, 300, 150, 7);
  	processing.image(primerPersonaje, 185, 350,50,70);
  	processing.image(segundoPersonaje, 465, 350, 50, 70);
  	processing.image(tercerPersonaje, 740, 350, 50, 70);
  	processing.image(cuartoPersonaje, 1020, 350, 50, 70);

  	var difx = processing.mouseX - xpos-MOD.width/2;
  	if(processing.abs(difx) > 1.0) {
  		xpos = xpos + difx/drag;
  		xpos = processing.constrain(xpos, 0, processing.width-MOD.width);
  	}  
  	var dify = processing.mouseY - ypos-MOD.height/2;
  	if(processing.abs(dify) > 1.0) {
  		ypos = ypos + dify/drag;
  		ypos = processing.constrain(ypos, 0, processing.height-MOD.height);
  	}  

  	processing.stroke(255);
  	processing.rect(rectX1, rectY1, 160, 50, 10);
  	processing.rect(rectX2, rectY2, 160, 50, 10);
  	processing.rect(rectX3, rectY3, 160, 50, 10);
  	processing.rect(rectX4, rectY4, 160, 50, 10);

  	update(processing.mouseX, processing.mouseY);

  	if (rectOver1) {
  		processing.text("JACK", 145, 475);
  		processing.text("  ?  ", 405, 475);
  		processing.text("  ?  ", 685, 475);
  		processing.text("  ?  ", 965, 475);
  		processing.noFill();
  	} 
  	if (rectOver2) {
  		processing.text("  ?  ", 125, 475);
  		processing.text("ELLIE", 415, 475);
  		processing.text("  ?  ", 685, 475);
  		processing.text("  ?  ", 965, 475);
  		processing.noFill();
  	} 
  	if (rectOver3) {
  		processing.text("  ?  ", 125, 475);
  		processing.text("  ?  ", 405, 475);
  		processing.text("PAUL", 705, 475);
  		processing.text("  ?  ", 965, 475);
  		processing.noFill();
  	} 
  	if (rectOver4) {
  		processing.text("  ?  ", 125, 475);
  		processing.text("  ?  ", 405, 475);
  		processing.text("  ?  ", 685, 475);
  		processing.text("BILLY", 980, 475);
  		processing.noFill();
  	} 

  	if(rectOver1 == false && rectOver2 == false && rectOver3 == false && rectOver4 == false){
  		processing.fill(204, 204, 0);
  	}




  };

   //FUNCTIONS


   function update(x, y) {

   	if(overRect(rectX1, rectY1, 160, 50)){
   		rectOver1 = true;
   	}
   	else if (overRect(rectX2, rectY2, 160, 50)) {
   		rectOver2 = true;
   	}
   	else if (overRect(rectX3, rectY3, 160, 50)) {
   		rectOver3 = true;
   	}
   	else if(overRect(rectX4, rectY4, 160, 50)){
   		rectOver4 = true;
   	}
   	if( overRect(rectX1, rectY1, 160, 50) == false && 
   		overRect(rectX2, rectY2, 160, 50) == false && 
   		overRect(rectX3, rectY3, 160, 50) == false && 
   		overRect(rectX4, rectY4, 160, 50) == false){

   		rectOver1 = rectOver2 = rectOver3 = rectOver4 = false;
   }
 }  


 processing.mousePressed = function() {

   if (rectOver1) {
    processing.exit();
    processing.noLoop();
    can = true;
    canvas.width = canvas.width;
    //World(canvas);
  }
  if (rectOver2) {
   processing.exit();
   processing.noLoop();
    //World(canvas);
  }
  if (rectOver3) {
   processing.exit();
   processing.noLoop();
    //World(canvas);
  }
  if (rectOver4) {
   processing.exit();
   processing.noLoop();
    //World(canvas);
  }
}




function overRect( x,  y,  width,  height)  {
   //Puede ser o width y height o processing.width...
   if (processing.mouseX >= x && processing.mouseX <= x+width && 
   	processing.mouseY >= y && processing.mouseY <= y+height) {
   	return true;
 } 
 else {
   return false;
 }
}
}
var canvas = document.getElementById("layer1");
var p = new Processing(canvas, sketchProc);
var sketch = p.externals.sketch; 
sketch.options.crispLines = true;
}


function draw2(){
	var world;
	var Sprites;
	var Images;
	var canvas2 = document.getElementById("canvas");
  ctx2 = canvas2.getContext("2d");
  
  Images  = new SaveImages();
  Sprites = new SaveSprites();

  Images.load(
   [
   ["green1", 		"images/game/playerGreen1.png"],
   ["green2", 		"images/game/playerGreen2.png"],
   ["red1",   		"images/game/playerRed1.png"],
   ["red2",   		"images/game/playerRed2.png"],
   ["blue1", 		"images/game/playerBlue1.png"],
   ["bulletRight", "images/game/playerShootRight.png"],
   ["bulletLeft",  "images/game/playerShootLeft.png"],
   ["bulletUp",    "images/game/playerShootUp.png"],
   ["bulletDown",  "images/game/playerShootDown.png"],
   ["bulletMain",  "images/game/playerShootMain.png"]
   ]);

  Images.completed = function() 
  {
   var spritePlayer1 = new Sprite(Images.get("blue1"));
   spritePlayer1.createDirection(4,4,0,5,0,0,{"up":3, "down":0, "right":2, "left":1});
   Sprites.add("player1", spritePlayer1);

   var spritePlayer2 = new Sprite(Images.get("red2"));
   spritePlayer2.createDirection(4,4,0,5,0,0,{"up":3, "down":0, "right":2, "left":1});
   Sprites.add("player2", spritePlayer2);
   world = new World("canvas");
   
 }
}




init();








</script>
</body>
</html>