<html>
	<head>
		<title>Ejemplo Tile 02</title>
		<script type="text/javascript" src="js/AlmacenImagenes.js"></script>
		<script type="text/javascript" src="js/Sprites.js"></script>
		<script type="text/javascript" src="js/Tile.js"></script>
		<script type="text/javascript" src="js/Personaje.js"></script>
		<script type="text/javascript" src="js/Jugador.js"></script>
		<script type="text/javascript" src="js/Mundo.js"></script>
		<script>
			var mundo;
			var Sprites;
			var Imagenes;
			
			window.onload=function(){
				Imagenes=new AlmacenImagenes();
				Sprites=new AlmacenSprites();
				
				Imagenes.cargar(
					[
						["calvo","img/personaje10_rojo.png"],
						["calvo2","img/personaje10_azul.png"],
						["mario","img/pepino.png"]
					]);
				Imagenes.completado=function(){
					var spriteJugadorTrans=new Sprite(Imagenes.get("calvo"));
					spriteJugadorTrans.createDireccion(4,4,0,5,0,0,{"arriba":3,"abajo":0,"derecha":2,"izquierda":1});
					Sprites.add("jugador",spriteJugadorTrans);
					mundo=new Mundo("micanvas","parar");
					
					document.getElementById("transparente").onclick=function(){
						mundo.detener();
						
						var spriteJugadorTrans=new Sprite(Imagenes.get("calvo"));
						spriteJugadorTrans.createDireccion(4,4,0,5,0,0,{"arriba":3,"abajo":0,"derecha":2,"izquierda":1});
						Sprites.add("jugador",spriteJugadorTrans);
						
						mundo=new Mundo("micanvas","parar");
					};
					document.getElementById("puntoapunto").onclick=function(){
						mundo.detener();
						
						var spriteJugadorTrans=new Sprite(Imagenes.get("calvo"));
						spriteJugadorTrans.setDireccion("arriba",[[4,159,28,209],[38,159,61,209],[71,159,94,209],[104,159,127,209]]);
						spriteJugadorTrans.setDireccion("abajo",[[3,0,27,49],[36,0,60,49],[69,0,93,49],[102,0,126,49]]);
						spriteJugadorTrans.setDireccion("derecha",[[1,106,31,153],[34,106,64,153],[67,106,97,153],[100,106,130,153]]);
						spriteJugadorTrans.setDireccion("izquierda",[[2,54,31,101],[35,54,65,101],[68,54,98,101],[100,54,130,101]]);
						Sprites.add("jugador",spriteJugadorTrans);
						
						mundo=new Mundo("micanvas","parar");
					};
					document.getElementById("coloreado").onclick=function(){
						mundo.detener();
						
						var spriteJugadorTrans=new Sprite(Imagenes.get("mario"));
						spriteJugadorTrans.createDireccion(4,4,0,0,0,0,{"arriba":0,"abajo":2,"derecha":1,"izquierda":3});
						Sprites.add("jugador",spriteJugadorTrans);
						
						mundo=new Mundo("micanvas","parar");
					};
				};
							
			};
			function log(texto,nueva){
				var capa=document.getElementById("log");
				if (nueva)
					capa.innerHTML+="<br/>"+texto;
				else
					capa.innerHTML=texto;
			}
		</script>
	</head>

	<body>
		<canvas id="micanvas"></canvas>
		<div id ="log"></div>
		<button id="transparente">Sprite transparente</button><button id="puntoapunto">Sprite Punto a punto</button><button id="coloreado">Sprite coloreado</button><button id="parar">Parar</button>
	</body>
</html>
